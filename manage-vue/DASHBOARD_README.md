# é¦–é¡µç»Ÿè®¡ä»ªè¡¨ç›˜è¿ç§»è¯´æ˜

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. åç«¯éƒ¨åˆ†
å·²åœ¨ `simple-manage` é¡¹ç›®ä¸­åˆ›å»ºï¼š

- **VO ç±»** (6ä¸ª)
  - `DashboardStatsVO` - é¦–é¡µç»Ÿè®¡ä¸» VO
  - `DailyCardTrendVO` - å¡å¯†è¶‹åŠ¿
  - `DailyDeviceTrendVO` - è®¾å¤‡è¶‹åŠ¿
  - `DailyRevenueTrendVO` - æ”¶ç›Šè¶‹åŠ¿
  - `GameCardStatsVO` - æ¸¸æˆç»Ÿè®¡
  - `CardStatusStatsVO` - å¡å¯†çŠ¶æ€

- **Mapper å±‚**
  - `DashboardMapper.java` - Mapper æ¥å£
  - `DashboardMapper.xml` - SQL æ˜ å°„æ–‡ä»¶

- **Service å±‚**
  - `DashboardService.java` - Service æ¥å£
  - `DashboardServiceImpl.java` - Service å®ç°

- **Controller å±‚**
  - `DashboardController.java` - æ§åˆ¶å™¨ï¼Œæä¾› `/dashboard/stats` æ¥å£

### 2. å‰ç«¯éƒ¨åˆ†
å·²åœ¨ `manage-vue` é¡¹ç›®ä¸­ä¿®æ”¹/åˆ›å»ºï¼š

- **API æ–‡ä»¶**
  - `src/api/dashboard.ts` - Dashboard API æ¥å£å®šä¹‰

- **é¡µé¢ç»„ä»¶**
  - `src/views/Home.vue` - é¦–é¡µç»Ÿè®¡ä»ªè¡¨ç›˜ï¼ˆå·²å®Œå…¨é‡å†™ï¼‰

## ğŸ“Š åŠŸèƒ½è¯´æ˜

### ç»Ÿè®¡å¡ç‰‡ï¼ˆ4ä¸ªï¼‰
1. **æ€»æ”¶ç›Š / ä»Šæ—¥æ–°å¢æ”¶ç›Š**
2. **æ€»å¡å¯†æ•° / ä»Šæ—¥æ–°å¢å¡å¯†**
3. **æ€»è®¾å¤‡æ•° / ä»Šæ—¥æ–°å¢è®¾å¤‡**
4. **å¡å¯†çŠ¶æ€åˆ†å¸ƒ**ï¼ˆæ­£å¸¸/åœç”¨ï¼‰

### æ•°æ®å±•ç¤ºï¼ˆä½¿ç”¨è¡¨æ ¼ï¼‰
1. **è¿‘30å¤©æ”¶ç›Šè¶‹åŠ¿** - è¡¨æ ¼å±•ç¤º
2. **è¿‘7å¤©å¡å¯†æ–°å¢è¶‹åŠ¿** - è¡¨æ ¼å±•ç¤º
3. **æ¸¸æˆå¡å¯†ç»Ÿè®¡** - è¡¨æ ¼å±•ç¤ºï¼ˆæ€»å¡å¯†/å·²æ¿€æ´»/æœªæ¿€æ´»ï¼‰
4. **è¿‘7å¤©è®¾å¤‡ç»‘å®šè¶‹åŠ¿** - è¡¨æ ¼å±•ç¤º
5. **å¡å¯†çŠ¶æ€åˆ†å¸ƒ** - å¡ç‰‡ç½‘æ ¼å±•ç¤ºï¼ˆæ­£å¸¸/åœç”¨/å·²è¿‡æœŸ/å³å°†è¿‡æœŸï¼‰

## ğŸ¨ è®¾è®¡ç‰¹ç‚¹

- âœ… **å»é™¤äº†æŠ¥é”™æ—¥å¿—æ¨¡å—**ï¼ˆæŒ‰éœ€æ±‚ï¼‰
- âœ… ä½¿ç”¨ Element Plus å†…ç½®ç»„ä»¶ï¼ˆè¡¨æ ¼ã€å¡ç‰‡ï¼‰
- âœ… ä¸ä¾èµ– EChartsï¼ˆç®€åŒ–ä¾èµ–ï¼‰
- âœ… å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯
- âœ… ç»Ÿä¸€çš„é…è‰²æ–¹æ¡ˆ
- âœ… æµç•…çš„åŠ¨ç”»æ•ˆæœ

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åç«¯
1. é‡å¯ Spring Boot åº”ç”¨
2. è®¿é—®æ¥å£ï¼š`GET http://localhost:8080/api/dashboard/stats`

### å‰ç«¯
1. ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨
2. è¿è¡Œå‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼š
   ```bash
   cd d:\projects\simple-manage\manage-vue
   npm run dev
   ```
3. è®¿é—®ï¼š`http://localhost:5173`
4. ç™»å½•åä¼šè‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µï¼ˆæ•°æ®ç»Ÿè®¡ä»ªè¡¨ç›˜ï¼‰

## ğŸ“ æ•°æ®åº“è¦æ±‚

ç¡®ä¿ä»¥ä¸‹è¡¨å­˜åœ¨ä¸”ç»“æ„æ­£ç¡®ï¼š
- `script_card` - å¡å¯†è¡¨
- `script_card_device` - è®¾å¤‡è¡¨
- `script_game` - æ¸¸æˆè¡¨
- `script_card_game` - å¡å¯†æ¸¸æˆå…³è”è¡¨

å­—æ®µè¦æ±‚ï¼š
- `del_flag = 0` è¡¨ç¤ºæœªåˆ é™¤
- `status = 0` è¡¨ç¤ºæ­£å¸¸ï¼Œ`status = 1` è¡¨ç¤ºåœç”¨
- `create_time` åˆ›å»ºæ—¶é—´
- `expire_time` è¿‡æœŸæ—¶é—´

## ğŸ”§ å¦‚æœéœ€è¦æ·»åŠ  ECharts å›¾è¡¨

å¦‚æœåç»­æƒ³è¦æ›´ä¸°å¯Œçš„å¯è§†åŒ–æ•ˆæœï¼Œå¯ä»¥å®‰è£… EChartsï¼š

```bash
npm install echarts
```

ç„¶åå‚è€ƒåŸ `d:\projects\simple-manage\views\index.vue` çš„å®ç°æ–¹å¼ã€‚

## ğŸ“¦ API å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "totalRevenue": 12345.67,
    "todayRevenue": 123.45,
    "totalCards": 1000,
    "todayCards": 50,
    "totalDevices": 800,
    "todayDevices": 20,
    "cardTrend": [
      {"date": "2024-11-23", "count": 10},
      {"date": "2024-11-24", "count": 15}
    ],
    "deviceTrend": [
      {"date": "2024-11-23", "count": 5},
      {"date": "2024-11-24", "count": 8}
    ],
    "gameStats": [
      {
        "gameId": "1",
        "gameName": "æ¸¸æˆA",
        "cardCount": 500,
        "activeCount": 400,
        "inactiveCount": 100
      }
    ],
    "cardStatusStats": {
      "normalCount": 800,
      "disabledCount": 100,
      "expiredCount": 50,
      "expiringSoonCount": 50
    },
    "revenueTrend": [
      {"date": "2024-11-23", "revenue": 123.45},
      {"date": "2024-11-24", "revenue": 234.56}
    ]
  }
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. åç«¯æ¥å£ä¸éœ€è¦è®¤è¯ï¼ˆæ ¹æ®éœ€è¦å¯æ·»åŠ  `@PreAuthorize` æ³¨è§£ï¼‰
2. å‰ç«¯ä½¿ç”¨ JWT Token è¿›è¡Œè®¤è¯
3. æ‰€æœ‰é‡‘é¢æ˜¾ç¤ºä¿ç•™ä¸¤ä½å°æ•°
4. è¡¨æ ¼æ”¯æŒæ»šåŠ¨ï¼Œé€‚é…ä¸åŒå±å¹•å°ºå¯¸
5. Loading çŠ¶æ€å·²æ·»åŠ ï¼Œæä¾›è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ

## ğŸ¯ ä¸åŸé¡¹ç›®çš„å·®å¼‚

| é¡¹ç›® | åŸé¡¹ç›®ï¼ˆopen-scriptï¼‰ | å½“å‰é¡¹ç›®ï¼ˆsimple-manageï¼‰ |
|------|---------------------|-------------------------|
| æŠ¥é”™æ—¥å¿— | âœ“ åŒ…å« | âœ— å·²ç§»é™¤ |
| å›¾è¡¨åº“ | ECharts | Element Plus è¡¨æ ¼ |
| å¤šç§Ÿæˆ· | âœ“ æ”¯æŒ | âœ— ä¸æ”¯æŒ |
| å“åº”å¼ | âœ“ | âœ“ |
| æ•°æ®å®æ—¶æ€§ | å®æ—¶ | å®æ—¶ |

---

**å¼€å‘è€…**: shanling  
**æ›´æ–°æ—¶é—´**: 2024-11-29
