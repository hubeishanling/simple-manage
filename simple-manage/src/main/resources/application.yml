server:
  port: 8080
  servlet:
    context-path: /api

spring:
  application:
    name: simple-manage
  
  # Jackson 配置
  jackson:
    # Date 类型格式化
    date-format: yyyy-MM-dd HH:mm:ss
    # 时区设置
    time-zone: GMT+8
    # 序列化配置
    serialization:
      # 美化输出
      indent_output: false
      # 忽略无法转换的对象
      fail_on_empty_beans: false
    # 反序列化配置
    deserialization:
      # 忽略未知属性
      fail_on_unknown_properties: false
  
  # 数据源配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://120.48.127.138:3306/simple-manage?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&serverTimezone=Asia/Shanghai&autoReconnect=true&failOverReadOnly=false
    username: root
    password: yr134167
    # HikariCP 连接池配置
    hikari:
      # 连接池最小空闲连接数
      minimum-idle: 5
      # 连接池最大连接数
      maximum-pool-size: 20
      # 连接超时时间（毫秒）
      connection-timeout: 30000
      # 连接最大存活时间（毫秒）- 设置为 10 分钟，远小于 MySQL wait_timeout
      # MySQL 默认 wait_timeout 为 28800 秒（8小时），但为安全起见设置较短时间
      max-lifetime: 600000
      # 连接空闲超时时间（毫秒）- 5 分钟
      idle-timeout: 300000
      # 连接测试查询（MySQL 8.0+ 推荐不设置，使用 JDBC4 的 isValid()）
      # connection-test-query: SELECT 1
      # 连接池名称
      pool-name: HikariPool-SimpleManage
      # 自动提交
      auto-commit: true
      # 连接泄漏检测阈值（毫秒）- 超过此时间未归还连接会记录日志
      leak-detection-threshold: 60000
      # 验证超时时间（毫秒）
      validation-timeout: 3000
      # 保持连接活跃的间隔时间（毫秒）- 每 5 分钟发送一次心跳
      keepalive-time: 300000
  
  # SQL 初始化配置
  sql:
    init:
      mode: never  # 使用代码方式初始化数据，不自动执行 SQL 文件
  
  # 文件上传配置
  servlet:
    multipart:
      # 最大文件大小
      max-file-size: 5MB
      # 最大请求大小
      max-request-size: 10MB

# MyBatis-Plus 配置
mybatis-plus:
  configuration:
    # 日志输出
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    # 驼峰命名转换
    map-underscore-to-camel-case: true
  global-config:
    db-config:
      # 主键类型（雪花算法）
      id-type: assign_id
      # 逻辑删除字段（已移除）
      # logic-delete-field: deleted
      # logic-delete-value: 1
      # logic-not-delete-value: 0
  # Mapper XML 文件位置（如果需要自定义 SQL）
  mapper-locations: classpath*:mapper/**/*.xml

# JWT 配置
jwt:
  # 密钥（至少 256 位）
  secret: simple-manage-secret-key-2024-must-be-at-least-256-bits-long-for-hs256
  # Token 有效期（毫秒），7 天
  expiration: 604800000
  # Token 前缀
  token-prefix: "Bearer "
  # Token 请求头名称
  header: Authorization

# 文件上传配置
file:
  upload:
    # 本地文件存储路径
    path: D:/uploads/scripts
    # 文件访问URL前缀
    url-prefix: http://localhost:8080/api/files/scripts
    # 最大文件大小（5MB）
    max-size: 5242880

# API 加密配置
api-decrypt:
  # 是否启用加密（true=启用，false=禁用）
  enabled: true
  # 请求头中加密密钥的字段名
  header-flag: encrypt-key
  # 默认响应加密公钥（如果数据库中没有配置，使用此默认值）
  # 注意：生产环境请在数据库 script_rsa_key 表中配置密钥
  public-key: 
  # 默认请求解密私钥（如果数据库中没有配置，使用此默认值）
  # 注意：生产环境请在数据库 script_rsa_key 表中配置密钥
  private-key:
